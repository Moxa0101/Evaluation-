{
    "sourceFile": "test.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1753776090677,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753776212776,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-let Data = JSON.parse(localStorage.getItem(\"tabledata\"));\r\n+let Data = JSON.parse(localStorage.getItem(\"tabledataTest\"));\r\n let currentPage = 1;\r\n const table = document.getElementById(\"outputTable\");\r\n \r\n function show() {\r\n@@ -138,22 +138,22 @@\n \r\n \r\n function addTableDataToStorage() {\r\n   if (!validateInputs(true)) return;\r\n-  const table_data = JSON.parse(localStorage.getItem('tabledata'));\r\n+  const table_data = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   let data_id = table_data?.length ? (table_data.length) + 1 : 1;\r\n   const name = document.getElementById(\"name\").value;\r\n   const age = document.getElementById(\"age\").value;\r\n   const state = document.getElementById(\"state\").value;\r\n   const city = document.getElementById(\"city\").value;\r\n   let tableData = [];\r\n-  table_data === null ? tableData = [] : tableData = JSON.parse(localStorage.getItem('tabledata'));\r\n+  table_data === null ? tableData = [] : tableData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   tableData.push({ Id: data_id, Name: name, Age: age, State: state, City: city });\r\n-  localStorage.setItem('tabledata', JSON.stringify(tableData));\r\n+  localStorage.setItem('tabledataTest', JSON.stringify(tableData));\r\n \r\n   let pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n   let lastPage = Math.ceil(Data.length / pagesPerShow);\r\n-  let currentData = JSON.parse(localStorage.getItem(\"tabledata\"));\r\n+  let currentData = JSON.parse(localStorage.getItem(\"tabledataTest\"));\r\n   clearInputs();\r\n   Data = currentData;\r\n   gotoPage(lastPage);\r\n   showTable(pagesPerShow);\r\n@@ -205,9 +205,9 @@\n   console.log(city)\r\n   document.getElementById(\"edit_section\").style.display = \"none\";\r\n   document.getElementById(\"addData\").style.display = \"block\";\r\n \r\n-  let storedData = JSON.parse(localStorage.getItem(\"tabledata\"));\r\n+  let storedData = JSON.parse(localStorage.getItem(\"tabledataTest\"));\r\n   let editedId = cells[0].textContent;\r\n   storedData = storedData.map(Data => {\r\n     if (Data.Id == editedId) {\r\n       Data.Name = name;\r\n@@ -216,9 +216,9 @@\n       Data.City = city;\r\n     }\r\n     return Data;\r\n   });\r\n-  localStorage.setItem(\"tabledata\", JSON.stringify(storedData));\r\n+  localStorage.setItem(\"tabledataTest\", JSON.stringify(storedData));\r\n   validateInputs();\r\n   clearInputs();\r\n   show();\r\n }\r\n@@ -226,16 +226,16 @@\n \r\n \r\n function deleteData(obj) {\r\n   obj.closest(\"tr\").remove();\r\n-  let storedData = JSON.parse(localStorage.getItem('tabledata'));\r\n+  let storedData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   const id = obj.closest(\"tr\").cells[0].innerText;\r\n   storedData = storedData.filter(Data => Data.Id != id);\r\n   storedData = storedData.map((Data, index) => {\r\n     Data.Id = index + 1;\r\n     return Data;\r\n   });\r\n-  localStorage.setItem('tabledata', JSON.stringify(storedData));\r\n+  localStorage.setItem('tabledataTest', JSON.stringify(storedData));\r\n   Data = storedData;\r\n   const pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n   showTable(pagesPerShow);\r\n   pagination(pagesPerShow);\r\n@@ -405,16 +405,16 @@\n \r\n function deleteSearchedData(obj) {\r\n   obj.closest(\"tr\").remove();\r\n   let tbody=document.querySelector('#outputTable tbody');\r\n-   let storedData = JSON.parse(localStorage.getItem('tabledata'));\r\n+   let storedData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   const id = obj.closest(\"tr\").cells[0].innerText;\r\n   storedData = storedData.filter(Data => Data.Id != id);\r\n   storedData = storedData.map((Data, index) => {\r\n     Data.Id = index + 1;\r\n     return Data;\r\n   });\r\n-   localStorage.setItem('tabledata', JSON.stringify(storedData));\r\n+   localStorage.setItem('tabledataTest', JSON.stringify(storedData));\r\n   document.getElementById(\"footer\").innerHTML = `<button class=\"activePage\">1</button> <span>${tbody.rows.length} out of ${tbody.rows.length}</span>`;\r\n   addBgcolorToAge();\r\n   \r\n }\r\n"
                },
                {
                    "date": 1753776265300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,9 +146,9 @@\n   const state = document.getElementById(\"state\").value;\r\n   const city = document.getElementById(\"city\").value;\r\n   let tableData = [];\r\n   table_data === null ? tableData = [] : tableData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n-  tableData.push({ Id: data_id, Name: name, Age: age, State: state, City: city });\r\n+  tableData.push({  data_id,  name,  age,  state, city });\r\n   localStorage.setItem('tabledataTest', JSON.stringify(tableData));\r\n \r\n   let pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n   let lastPage = Math.ceil(Data.length / pagesPerShow);\r\n"
                },
                {
                    "date": 1753776571458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -207,14 +207,14 @@\n   document.getElementById(\"addData\").style.display = \"block\";\r\n \r\n   let storedData = JSON.parse(localStorage.getItem(\"tabledataTest\"));\r\n   let editedId = cells[0].textContent;\r\n-  storedData = storedData.map(Data => {\r\n-    if (Data.Id == editedId) {\r\n-      Data.Name = name;\r\n-      Data.Age = age;\r\n-      Data.State = state;\r\n-      Data.City = city;\r\n+  storedData = storedData.map(row => {\r\n+    if (row[0] == editedId) {\r\n+      row[1] = name;\r\n+      row[2] = age;\r\n+      row[3] = state;\r\n+      row[4] = city;\r\n     }\r\n     return Data;\r\n   });\r\n   localStorage.setItem(\"tabledataTest\", JSON.stringify(storedData));\r\n@@ -228,11 +228,11 @@\n function deleteData(obj) {\r\n   obj.closest(\"tr\").remove();\r\n   let storedData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   const id = obj.closest(\"tr\").cells[0].innerText;\r\n-  storedData = storedData.filter(Data => Data.Id != id);\r\n+  storedData = storedData.filter(row => row[0] != id);\r\n   storedData = storedData.map((Data, index) => {\r\n-    Data.Id = index + 1;\r\n+    row[0] = index + 1;\r\n     return Data;\r\n   });\r\n   localStorage.setItem('tabledataTest', JSON.stringify(storedData));\r\n   Data = storedData;\r\n@@ -330,13 +330,13 @@\n   </tr>\r\n   </thead>`\r\n   paginatedData.forEach((row) => {\r\n     tableToShow += `<tr>\r\n-      <td>${row.Id}</td>\r\n-      <td>${row.Name}</td>\r\n-      <td>${row.Age}</td>\r\n-      <td>${row.State}</td>\r\n-      <td>${row.City}</td>\r\n+      <td>${row[0]}</td>\r\n+      <td>${row[1]}</td>\r\n+      <td>${row[3]}</td>\r\n+      <td>${row[4]}</td>\r\n+      <td>${row[5]}</td>\r\n       <td><button onclick=\"takeToEdit(this)\">Edit</button>\r\n       <button onclick=\"deleteData(this)\">Delete</button>\r\n       </td></tr>`\r\n   });\r\n@@ -371,9 +371,9 @@\n   dropdown.style.display=\"none\";\r\n   let showdropdown=document.getElementById(\"pagesToShowwhilesearch\");\r\n   showdropdown.style.display=\"block\";\r\n   let Search = document.getElementById(\"search\").value;\r\n-  let searchedData = Data.filter(Data => Data.Name.substring(0, Search.length) == Search || Data.Age == Search || Data.State.substring(0, Search.length) == Search || Data.City.substring(0, Search.length) == Search || Data.Name.toLowerCase().substring(0, Search.length) == Search || Data.State.toLowerCase().substring(0, Search.length) == Search || Data.City.toLowerCase().substring(0, Search.length) == Search);\r\n+  let searchedData = Data.filter(row => row[1].substring(0, Search.length) == Search || row[2] == Search || row[3].substring(0, Search.length) == Search || row[4].substring(0, Search.length) == Search || row[0].toLowerCase().substring(0, Search.length) == Search || row[3].toLowerCase().substring(0, Search.length) == Search || row[4].toLowerCase().substring(0, Search.length) == Search);\r\n   let tableToShow = `<thead><tr><th>id</th>\r\n       <th>Name <span class=\"arrow\" onclick=\"sortTable(1, this); \" data-order=\"asc\">&#9650;</span> </th>\r\n       <th>Age <span class=\"arrow\" onclick=\"sortTable(2, this); \" data-order=\"asc\">&#9650;</span></th>\r\n       <th>State <span class=\"arrow\" onclick=\"sortTable(3, this); \" data-order=\"asc\">&#9650;</span></th>\r\n@@ -407,11 +407,11 @@\n   obj.closest(\"tr\").remove();\r\n   let tbody=document.querySelector('#outputTable tbody');\r\n    let storedData = JSON.parse(localStorage.getItem('tabledataTest'));\r\n   const id = obj.closest(\"tr\").cells[0].innerText;\r\n-  storedData = storedData.filter(Data => Data.Id != id);\r\n+  storedData = storedData.filter(row => row[0] != id);\r\n   storedData = storedData.map((Data, index) => {\r\n-    Data.Id = index + 1;\r\n+    row[0] = index + 1;\r\n     return Data;\r\n   });\r\n    localStorage.setItem('tabledataTest', JSON.stringify(storedData));\r\n   document.getElementById(\"footer\").innerHTML = `<button class=\"activePage\">1</button> <span>${tbody.rows.length} out of ${tbody.rows.length}</span>`;\r\n"
                },
                {
                    "date": 1753776661273,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -330,13 +330,13 @@\n   </tr>\r\n   </thead>`\r\n   paginatedData.forEach((row) => {\r\n     tableToShow += `<tr>\r\n-      <td>${row[0]}</td>\r\n-      <td>${row[1]}</td>\r\n-      <td>${row[3]}</td>\r\n-      <td>${row[4]}</td>\r\n-      <td>${row[5]}</td>\r\n+      <td>${row.data_id}</td>\r\n+      <td>${row.name}</td>\r\n+      <td>${row.age}</td>\r\n+      <td>${row.state}</td>\r\n+      <td>${row.city}</td>\r\n       <td><button onclick=\"takeToEdit(this)\">Edit</button>\r\n       <button onclick=\"deleteData(this)\">Delete</button>\r\n       </td></tr>`\r\n   });\r\n"
                }
            ],
            "date": 1753776090677,
            "name": "Commit-0",
            "content": "let Data = JSON.parse(localStorage.getItem(\"tabledata\"));\r\nlet currentPage = 1;\r\nconst table = document.getElementById(\"outputTable\");\r\n\r\nfunction show() {\r\n  const form = document.getElementById(\"formContainer\");\r\n  if (form.style.display === \"none\") {\r\n    form.style.display = \"block\";\r\n  } else {\r\n    form.style.display = \"none\";\r\n  }\r\n}\r\n\r\nfunction addBgcolorToAge() {\r\n  for (let i = 0; i < table.rows.length; i++) {\r\n    const row = table.rows;\r\n    const cell = row[i].cells[2];\r\n    const cellValue = cell?.innerHTML;\r\n    if (cellValue <= 18) {\r\n      cell.style.backgroundColor = \"orange\";\r\n      cell.style.color = \"white\";\r\n    }\r\n    else if (cellValue > 18 && cellValue < 51) {\r\n      cell.style.backgroundColor = \"purple\";\r\n      cell.style.color = \"white\";\r\n    }\r\n    else if (cellValue > 50) {\r\n      cell.style.backgroundColor = \"red\";\r\n      cell.style.color = \"white\";\r\n    }\r\n  }\r\n}\r\n\r\n\r\nconst citiesByState = {\r\n  \"Andhra Pradesh\": [\"Visakhapatnam\", \"Vijayawada\", \"Guntur\", \"Tirupati\", \"Nellore\", \"Kurnool\"],\r\n  \"Arunachal Pradesh\": [\"Itanagar\", \"Tawang\", \"Pasighat\", \"Ziro\", \"Bomdila\"],\r\n  \"Assam\": [\"Guwahati\", \"Dispur\", \"Tezpur\", \"Dibrugarh\", \"Jorhat\", \"Silchar\"],\r\n  \"Bihar\": [\"Patna\", \"Gaya\", \"Bihar Sharif\", \"Darbhanga\", \"Bhagalpur\", \"Muzaffarpur\"],\r\n  \"Chhattisgarh\": [\"Raipur\", \"Bilaspur\", \"Durg\", \"Korba\", \"Bhilai\", \"Rajnandgaon\"],\r\n  \"Goa\": [\"Panaji\", \"Vasco da Gama\", \"Margao\", \"Ponda\", \"Mapusa\"],\r\n  \"Gujarat\": [\"Ahmedabad\", \"Surat\", \"Vadodara\", \"Rajkot\", \"Bhavnagar\", \"Jamnagar\", \"Junagadh\", \"Gandhinagar\", \"Nadiad\", \"Anand\"],\r\n  \"Haryana\": [\"Chandigarh\", \"Gurugram\", \"Faridabad\", \"Sonipat\", \"Panipat\", \"Ambala\", \"Hisar\"],\r\n  \"Himachal Pradesh\": [\"Shimla\", \"Dharamshala\", \"Mandi\", \"Solan\", \"Chamba\", \"Bilaspur\"],\r\n  \"Jharkhand\": [\"Ranchi\", \"Jamshedpur\", \"Dhanbad\", \"Bokaro\", \"Hazaribagh\", \"Deoghar\"],\r\n  \"Karnataka\": [\"Bengaluru\", \"Mysuru\", \"Mangaluru\", \"Hubli-Dharwad\", \"Belagavi\", \"Davangere\"],\r\n  \"Kerala\": [\"Thiruvananthapuram\", \"Kochi\", \"Kozhikode\", \"Thrissur\", \"Alappuzha\", \"Kollam\"],\r\n  \"Madhya Pradesh\": [\"Bhopal\", \"Indore\", \"Gwalior\", \"Jabalpur\", \"Ujjain\", \"Sagar\"],\r\n  \"Maharashtra\": [\"Mumbai\", \"Pune\", \"Nagpur\", \"Nashik\", \"Aurangabad\", \"Thane\", \"Solapur\"],\r\n  \"Manipur\": [\"Imphal\", \"Bishnupur\", \"Ukhrul\", \"Chandel\", \"Tamenglong\"],\r\n  \"Meghalaya\": [\"Shillong\", \"Tura\", \"Jowai\", \"Cherrapunji\", \"Nongpoh\"],\r\n  \"Mizoram\": [\"Aizawl\", \"Lunglei\", \"Champhai\", \"Serchhip\", \"Tuipang\"],\r\n  \"Nagaland\": [\"Kohima\", \"Dimapur\", \"Mokokchung\", \"Tuensang\", \"Zunheboto\"],\r\n  \"Odisha\": [\"Bhubaneswar\", \"Cuttack\", \"Rourkela\", \"Brahmapur\", \"Sambalpur\", \"Puri\"],\r\n  \"Punjab\": [\"Chandigarh\", \"Ludhiana\", \"Amritsar\", \"Jalandhar\", \"Patiala\", \"Kapurthala\"],\r\n  \"Rajasthan\": [\"Jaipur\", \"Jodhpur\", \"Udaipur\", \"Bikaner\", \"Ajmer\", \"Jaisalmer\"],\r\n  \"Sikkim\": [\"Gangtok\", \"Namchi\", \"Gyalshing\", \"Mangan\", \"Ravangla\"],\r\n  \"Tamil Nadu\": [\"Chennai\", \"Coimbatore\", \"Madurai\", \"Tiruchirappalli\", \"Erode\", \"Vellore\"],\r\n  \"Telangana\": [\"Hyderabad\", \"Warangal\", \"Nizamabad\", \"Karimnagar\", \"Adilabad\"],\r\n  \"Tripura\": [\"Agartala\", \"Amarpur\", \"Kumarghat\", \"Udaipur\", \"Kunjaban\"],\r\n  \"Uttar Pradesh\": [\"Lucknow\", \"Kanpur\", \"Varanasi\", \"Agra\", \"Allahabad\", \"Noida\", \"Ghaziabad\"],\r\n  \"Uttarakhand\": [\"Dehradun\", \"Haridwar\", \"Roorkee\", \"Rishikesh\", \"Haldwani\", \"Kashipur\"],\r\n  \"West Bengal\": [\"Kolkata\", \"Howrah\", \"Darjeeling\", \"Siliguri\", \"Asansol\", \"Durgapur\"],\r\n  \"Delhi (NCT)\": [\"New Delhi\", \"Dwarka\", \"Rohini\", \"Karol Bagh\", \"Saket\"],\r\n  \"Jammu and Kashmir\": [\"Srinagar\", \"Jammu\", \"Baramulla\", \"Anantnag\", \"Udhampur\"],\r\n  \"Ladakh\": [\"Leh\", \"Kargil\"],\r\n  \"Puducherry\": [\"Puducherry\", \"Karaikal\", \"Mahe\", \"Yanam\"],\r\n  \"Chandigarh\": [\"Chandigarh\"]\r\n};\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  const stateSelect = document.getElementById('state');\r\n  const citySelect = document.getElementById('city');\r\n\r\n  for (const state in citiesByState) {\r\n    const option = document.createElement('option');\r\n    option.value = state;\r\n    option.textContent = state;\r\n    stateSelect.appendChild(option);\r\n  }\r\n  stateSelect.addEventListener('click', function () {\r\n    const selectedState = this.value;\r\n    citySelect.innerHTML = '<option value=\"\">Select City</option>';\r\n    if (selectedState) {\r\n      const cities = citiesByState[selectedState];\r\n      if (cities) {\r\n        cities.forEach(city => {\r\n          const option = document.createElement('option');\r\n          option.value = city;\r\n          option.textContent = city;\r\n          citySelect.appendChild(option);\r\n        });\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\nfunction validateInputs() {\r\n  const nameInput = document.getElementById(\"name\");\r\n  const ageInput = document.getElementById(\"age\");\r\n  const stateSelect = document.getElementById(\"state\");\r\n  const citySelect = document.getElementById(\"city\");\r\n\r\n  let isValid = true;\r\n  let errorMessage = \"\";\r\n  let namePattern = /^[a-zA-Z]+(?: [a-zA-Z]+)+$/;\r\n  if (nameInput.value.trim() === '') {\r\n    errorMessage += \"Enter valid name.\\n\";\r\n    isValid = false;\r\n  }\r\n\r\n  if (!namePattern.test(nameInput.value.trim())) {\r\n    errorMessage += \"Enter full  name.\\n\";\r\n    isValid = false;\r\n  }\r\n\r\n  const age = parseInt(ageInput.value);\r\n  if (!age || age < 1 || age > 120) {\r\n    errorMessage += 'age is invalid. \\n';\r\n    isValid = false;\r\n  }\r\n  if (stateSelect.value === '') {\r\n    errorMessage += 'State select is required. \\n';\r\n    isValid = false;\r\n  }\r\n\r\n  if (citySelect.value === '') {\r\n    errorMessage += 'City select is required \\n';\r\n    isValid = false;\r\n  }\r\n\r\n  if (!isValid) {\r\n    alert(errorMessage);\r\n  }\r\n  return isValid;\r\n}\r\n\r\n\r\n\r\nfunction addTableDataToStorage() {\r\n  if (!validateInputs(true)) return;\r\n  const table_data = JSON.parse(localStorage.getItem('tabledata'));\r\n  let data_id = table_data?.length ? (table_data.length) + 1 : 1;\r\n  const name = document.getElementById(\"name\").value;\r\n  const age = document.getElementById(\"age\").value;\r\n  const state = document.getElementById(\"state\").value;\r\n  const city = document.getElementById(\"city\").value;\r\n  let tableData = [];\r\n  table_data === null ? tableData = [] : tableData = JSON.parse(localStorage.getItem('tabledata'));\r\n  tableData.push({ Id: data_id, Name: name, Age: age, State: state, City: city });\r\n  localStorage.setItem('tabledata', JSON.stringify(tableData));\r\n\r\n  let pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n  let lastPage = Math.ceil(Data.length / pagesPerShow);\r\n  let currentData = JSON.parse(localStorage.getItem(\"tabledata\"));\r\n  clearInputs();\r\n  Data = currentData;\r\n  gotoPage(lastPage);\r\n  showTable(pagesPerShow);\r\n  pagination(pagesPerShow);\r\n}\r\n\r\n\r\n\r\nlet edit_btn_obj = null;\r\nfunction takeToEdit(obj) {\r\n  document.getElementById(\"edit_section\").style.display = \"block\";\r\n  document.getElementById(\"addData\").style.display = \"none\";\r\n  const data = obj.closest(\"tr\").cells;\r\n   edit_btn_obj = obj;\r\n  const name = data[1].innerHTML;\r\n  const age = data[2].innerHTML;\r\n  const state = data[3].innerHTML;\r\n  const city = data[4].innerHTML;\r\n  document.getElementById(\"name\").value = name;\r\n  document.getElementById(\"age\").value = age;\r\n  document.getElementById(\"state\").value=state;\r\n  if (state) {\r\n      const cities = citiesByState[state];\r\n      if (cities) {\r\n        cities.forEach(city => {\r\n          const option = document.createElement('option');\r\n          option.value =  city;\r\n          option.textContent = city;\r\n          document.getElementById(\"city\").appendChild(option);\r\n        });\r\n      }\r\n     \r\n    }\r\n    document.getElementById(\"city\").value=city;\r\n  show();\r\n}\r\n\r\n\r\nfunction performEdit() {\r\n  const name = document.getElementById(\"name\").value;\r\n  const age = document.getElementById(\"age\").value;\r\n  const state = document.getElementById(\"state\").value;\r\n  const city = document.getElementById(\"city\").value;\r\n  cells = edit_btn_obj.closest(\"tr\").cells;\r\n  cells[1].innerHTML = name;\r\n  cells[2].innerHTML = age;\r\n  cells[3].innerHTML = state;\r\n  cells[4].innerHTML = city;\r\n  console.log(city)\r\n  document.getElementById(\"edit_section\").style.display = \"none\";\r\n  document.getElementById(\"addData\").style.display = \"block\";\r\n\r\n  let storedData = JSON.parse(localStorage.getItem(\"tabledata\"));\r\n  let editedId = cells[0].textContent;\r\n  storedData = storedData.map(Data => {\r\n    if (Data.Id == editedId) {\r\n      Data.Name = name;\r\n      Data.Age = age;\r\n      Data.State = state;\r\n      Data.City = city;\r\n    }\r\n    return Data;\r\n  });\r\n  localStorage.setItem(\"tabledata\", JSON.stringify(storedData));\r\n  validateInputs();\r\n  clearInputs();\r\n  show();\r\n}\r\n\r\n\r\n\r\nfunction deleteData(obj) {\r\n  obj.closest(\"tr\").remove();\r\n  let storedData = JSON.parse(localStorage.getItem('tabledata'));\r\n  const id = obj.closest(\"tr\").cells[0].innerText;\r\n  storedData = storedData.filter(Data => Data.Id != id);\r\n  storedData = storedData.map((Data, index) => {\r\n    Data.Id = index + 1;\r\n    return Data;\r\n  });\r\n  localStorage.setItem('tabledata', JSON.stringify(storedData));\r\n  Data = storedData;\r\n  const pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n  showTable(pagesPerShow);\r\n  pagination(pagesPerShow);\r\n\r\n}\r\n\r\n\r\n\r\nfunction clearInputs() {\r\n  document.getElementById(\"name\").value = \"\";\r\n  document.getElementById(\"age\").value = \"\";\r\n  document.getElementById(\"state\").value = \"\";\r\n  document.getElementById(\"city\").value = \"\";\r\n}\r\n\r\n\r\n\r\n\r\nfunction cancelDataUpdate() {\r\n  document.getElementById(\"name\").value = \"\";\r\n  document.getElementById(\"age\").value = \"\";\r\n  document.getElementById(\"state\").value = \"\";\r\n  document.getElementById(\"city\").value = \"\";\r\n  document.getElementById(\"edit_section\").style.display = \"none\";\r\n  document.getElementById(\"addData\").style.display = \"block\";\r\n}\r\n\r\n\r\n\r\nlet sortDirections = {};\r\nfunction sortTable(colIndex, arrowEl) {\r\n  const tbody = table.querySelector(\" tbody\");\r\n  const rows = Array.from(tbody.rows);\r\n\r\n  sortDirections[colIndex] = !sortDirections[colIndex];\r\n\r\n  rows.sort((a, b) => {\r\n    let valA = a.cells[colIndex].textContent.trim();\r\n    let valB = b.cells[colIndex].textContent.trim();\r\n\r\n    if (!isNaN(valA) && !isNaN(valB)) {\r\n      valA = +valA;\r\n      valB = +valB;\r\n    }\r\n\r\n    return sortDirections[colIndex]\r\n      ? valA > valB ? 1 : -1\r\n      : valA < valB ? 1 : -1;\r\n  });\r\n\r\n  rows.forEach(row => tbody.appendChild(row));\r\n  updateArrowIcons(colIndex, arrowEl);\r\n  addBgcolorToAge();\r\n\r\n}\r\n\r\n\r\nfunction updateArrowIcons(activeIndex, activeArrow) {\r\n  const allArrows = document.querySelectorAll(\"th .arrow\");\r\n  allArrows.forEach(arrow => {\r\n    arrow.innerHTML = \"&#9650;\"; // default to up arrow\r\n  });\r\n\r\n  activeArrow.innerHTML = sortDirections[activeIndex] ? \"&#9650;\" : \"&#9660;\";\r\n}\r\n\r\nconst pagesPerShow = document.getElementById(\"pagesToShow\");\r\nlet option = document.createElement(\"option\");\r\noption.value = Data.length;\r\noption.innerHTML = \"All\";\r\npagesPerShow.appendChild(option);\r\n\r\ndocument.getElementById('pagesToShow').addEventListener(\"change\", function () {\r\n  let pagesPerShow = this.value;\r\n  gotoPage(1);\r\n  showTable(pagesPerShow);\r\n  pagination(pagesPerShow);\r\n})\r\n\r\nfunction showTable(pagesPerShow) {\r\n  const startIndex = (currentPage - 1) * pagesPerShow;\r\n  const endIndex = startIndex + parseInt(pagesPerShow);\r\n  const paginatedData = Data.slice(startIndex, endIndex);\r\n  let tableToShow = `<thead>\r\n  <tr>\r\n  <th>id</th>\r\n  <th>Name <span class=\"arrow\" onclick=\"sortTable(1, this); \" data-order=\"asc\">&#9650;</span> </th>\r\n  <th>Age <span class=\"arrow\" onclick=\"sortTable(2, this); \" data-order=\"asc\">&#9650;</span></th>\r\n  <th>State <span class=\"arrow\" onclick=\"sortTable(3, this); \" data-order=\"asc\">&#9650;</span></th>\r\n  <th>City <span class=\"arrow\" onclick=\"sortTable(4, this); \" data-order=\"asc\">&#9650;</span></th>\r\n  <th>Action</th>\r\n  </tr>\r\n  </thead>`\r\n  paginatedData.forEach((row) => {\r\n    tableToShow += `<tr>\r\n      <td>${row.Id}</td>\r\n      <td>${row.Name}</td>\r\n      <td>${row.Age}</td>\r\n      <td>${row.State}</td>\r\n      <td>${row.City}</td>\r\n      <td><button onclick=\"takeToEdit(this)\">Edit</button>\r\n      <button onclick=\"deleteData(this)\">Delete</button>\r\n      </td></tr>`\r\n  });\r\n  table.innerHTML = tableToShow;\r\n  addBgcolorToAge();\r\n}\r\n\r\nfunction pagination(pagesPerShow) { \r\n  document.getElementById(\"footer\").innerHTML = \"\";\r\n  let totalPages = Math.ceil((Data.length) / pagesPerShow);\r\n  footer.innerHTML += `<button onclick=\"gotoPage(${currentPage - 1})\" ${currentPage === 1 ? 'disabled' : ''}>Prev</button>`;\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    footer.innerHTML += `<button onclick=\"gotoPage(${i})\" ${i === currentPage ? \"class='activePage'\" : ''}>${i}</button>`;\r\n  }\r\n  footer.innerHTML += `<button onclick=\"gotoPage(${currentPage + 1})\"${currentPage === totalPages ? 'disabled' : ''}>Next</button>`;\r\n}\r\n\r\nfunction gotoPage(page) {\r\n  currentPage = page;\r\n  const pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n  showTable(pagesPerShow);\r\n  pagination(pagesPerShow);\r\n}\r\nshowTable(10);\r\npagination(10);\r\n\r\n\r\n\r\ndocument.getElementById(\"search\").addEventListener(\"input\", function () {\r\n  table.innerHTML = \"\";\r\n  let dropdown=document.getElementById(\"pagesToShow\");\r\n  dropdown.style.display=\"none\";\r\n  let showdropdown=document.getElementById(\"pagesToShowwhilesearch\");\r\n  showdropdown.style.display=\"block\";\r\n  let Search = document.getElementById(\"search\").value;\r\n  let searchedData = Data.filter(Data => Data.Name.substring(0, Search.length) == Search || Data.Age == Search || Data.State.substring(0, Search.length) == Search || Data.City.substring(0, Search.length) == Search || Data.Name.toLowerCase().substring(0, Search.length) == Search || Data.State.toLowerCase().substring(0, Search.length) == Search || Data.City.toLowerCase().substring(0, Search.length) == Search);\r\n  let tableToShow = `<thead><tr><th>id</th>\r\n      <th>Name <span class=\"arrow\" onclick=\"sortTable(1, this); \" data-order=\"asc\">&#9650;</span> </th>\r\n      <th>Age <span class=\"arrow\" onclick=\"sortTable(2, this); \" data-order=\"asc\">&#9650;</span></th>\r\n      <th>State <span class=\"arrow\" onclick=\"sortTable(3, this); \" data-order=\"asc\">&#9650;</span></th>\r\n      <th>City <span class=\"arrow\" onclick=\"sortTable(4, this); \" data-order=\"asc\">&#9650;</span></th>\r\n      <th>Action</th></thead>`\r\n  searchedData.forEach((row) => {\r\n    tableToShow += `<tr>\r\n      <td>${row.Id}</td>\r\n      <td>${row.Name}</td>\r\n      <td>${row.Age}</td>\r\n      <td>${row.State}</td>\r\n      <td>${row.City}</td>\r\n      <td><button onclick=\"takeToEdit(this)\">Edit</button>\r\n      <button onclick=\"deleteSearchedData(this)\">Delete</button>\r\n      </td></tr>`\r\n  })\r\n  table.innerHTML = tableToShow;\r\n  document.getElementById(\"footer\").innerHTML = `<button class=\"activePage\">1</button><span>${searchedData.length} out of ${searchedData.length}</span>`;\r\n\r\n  if(Search==\"\"){\r\n    const pagesPerShow = document.getElementById(\"pagesToShow\").value;\r\n    dropdown.style.display=\"block\";\r\n    showdropdown.style.display=\"none\";\r\n    showTable(pagesPerShow);\r\n    pagination(pagesPerShow);\r\n  }\r\n  addBgcolorToAge();\r\n})\r\n\r\nfunction deleteSearchedData(obj) {\r\n  obj.closest(\"tr\").remove();\r\n  let tbody=document.querySelector('#outputTable tbody');\r\n   let storedData = JSON.parse(localStorage.getItem('tabledata'));\r\n  const id = obj.closest(\"tr\").cells[0].innerText;\r\n  storedData = storedData.filter(Data => Data.Id != id);\r\n  storedData = storedData.map((Data, index) => {\r\n    Data.Id = index + 1;\r\n    return Data;\r\n  });\r\n   localStorage.setItem('tabledata', JSON.stringify(storedData));\r\n  document.getElementById(\"footer\").innerHTML = `<button class=\"activePage\">1</button> <span>${tbody.rows.length} out of ${tbody.rows.length}</span>`;\r\n  addBgcolorToAge();\r\n  \r\n}\r\n\r\n\r\n\r\n"
        }
    ]
}